{"version":3,"file":"scramble-f80b64b9.js","sources":["../node_modules/svelte-typewriter/src/modes/scramble.js"],"sourcesContent":["import { sleep } from '../helpers/sleep'\nimport { runOnEveryParentUntil } from '../helpers/runOnEveryParentUntil'\n\nconst getRandomNumber = (min, max) => Math.floor(Math.random() * (max - min)) + min\n\nconst getRandomLetter = () => {\n\tconst possibleLetters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'.split(\n\t\t''\n\t)\n\tconst letterIndexLimit = possibleLetters.length\n\tconst randomLetterIndex = getRandomNumber(0, letterIndexLimit)\n\tconst randomLetter = possibleLetters[randomLetterIndex]\n\treturn randomLetter\n}\n\n// returns a array with a timeout (in ms) for each letter of the word\nconst getLettersTimeout = (textLetters, timeout) => {\n\tconst minimumTimeoutPossible = timeout / 3\n\t// TODO: find a better way to deal with this instead of explicitly reducing the maximum timeout\n\t// otherwise, at the end of the animation, one or two characters remain scrambled\n\tconst lettersTimeout = textLetters.map(() =>\n\t\tgetRandomNumber(minimumTimeoutPossible, timeout - 100)\n\t)\n\treturn lettersTimeout\n}\n\n/** @type {TypewriterModeFn} */\nexport const mode = async (elements, options) => {\n\tconst timeout = typeof options.scramble == 'number' ? options.scramble : 3000\n\tawait new Promise(resolve => {\n\t\telements.forEach(async ({ currentNode, text }) => {\n\t\t\tlet wordLetters = text.split('')\n\t\t\tconst lettersTimeout = getLettersTimeout(wordLetters, timeout)\n\t\t\tconst startingTime = Date.now()\n\n\t\t\trunOnEveryParentUntil(currentNode, options.parentElement, element => {\n\t\t\t\telement.classList.add('finished-typing')\n\t\t\t})\n\n\t\t\twhile (Date.now() - startingTime < timeout) {\n\t\t\t\tconst randomLetterIndex = getRandomNumber(0, wordLetters.length)\n\t\t\t\tconst randomLetterTimeout = lettersTimeout[randomLetterIndex]\n\t\t\t\tconst isRandomLetterWhitespace = wordLetters[randomLetterIndex] === ' '\n\t\t\t\tconst timeEllapsed = () => Date.now() - startingTime\n\t\t\t\tconst didRandomLetterReachTimeout = () => timeEllapsed() >= randomLetterTimeout\n\n\t\t\t\tif (didRandomLetterReachTimeout() || isRandomLetterWhitespace) {\n\t\t\t\t\tconst letterFinishedAnimation =\n\t\t\t\t\t\twordLetters[randomLetterIndex] === text[randomLetterIndex]\n\n\t\t\t\t\tif (!letterFinishedAnimation)\n\t\t\t\t\t\twordLetters[randomLetterIndex] = text[randomLetterIndex]\n\t\t\t\t\telse continue\n\t\t\t\t} else {\n\t\t\t\t\twordLetters[randomLetterIndex] = getRandomLetter()\n\t\t\t\t}\n\n\t\t\t\tconst scrambledText = wordLetters.join('')\n\t\t\t\tcurrentNode.innerHTML = scrambledText\n\n\t\t\t\tconst finishedScrambling = scrambledText === text\n\n\t\t\t\tconst letterInterval = options.scrambleSlowdown\n\t\t\t\t\t? Math.round(timeEllapsed() / 100)\n\t\t\t\t\t: 1\n\n\t\t\t\tawait sleep(letterInterval)\n\n\t\t\t\tif (finishedScrambling) {\n\t\t\t\t\tresolve()\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcurrentNode.innerHTML = text\n\t\t})\n\t})\n\toptions.dispatch('done')\n}\n"],"names":[],"mappings":"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"}